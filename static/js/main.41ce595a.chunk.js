(this["webpackJsonpnow-showing-movies"]=this["webpackJsonpnow-showing-movies"]||[]).push([[0],{21:function(e,t,n){e.exports={wrapper:"Card_wrapper__1v-H4",card:"Card_card__3U8v9",description:"Card_description__1Kq2S",title:"Card_title__3RCMy"}},22:function(e,t,n){e.exports=n.p+"static/media/logo.31d26327.svg"},40:function(e,t,n){e.exports={header:"Header_header__3_sCI"}},41:function(e,t,n){e.exports={main:"Main_main__1i2Zh"}},42:function(e,t,n){e.exports={footer:"Footer_footer__37Kwf"}},43:function(e,t,n){e.exports={sidebar:"Sidebar_sidebar__AuYMI"}},50:function(e,t,n){e.exports={cards:"Cards_cards__2DDO1"}},53:function(e,t,n){e.exports=n(80)},79:function(e,t,n){},80:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(11),i=n.n(o),c=n(22),l=n.n(c),s=n(40),u=n.n(s),d=function(){return a.a.createElement("header",{className:u.a.header},a.a.createElement("img",{src:l.a,alt:"themoviedb_logo"}))},p=n(41),v=n.n(p),g=function(e){return a.a.createElement("main",{className:v.a.main},e.children)},m=n(42),f=n.n(m),y=function(e){return a.a.createElement("footer",{className:f.a.footer},a.a.createElement("img",{src:l.a,alt:"themoviedb_logo"}))},h=n(43),b=n.n(h),O=n(51),_=function(e){var t=e.options,n=e.value,r=e.isMulti,o=void 0!==r&&r,i=e.change,c=e.placeholder;return a.a.createElement(O.a,{options:t,defaultValue:n,onChange:i,isMulti:o,placeholder:c})},j=n(15),w=n(45),E=n(46),P=n(12),S=n(2),D=n(29),A=n(47),N=["/movie/now_playing","/genre/movie/list"],C=n.n(A).a.create({baseURL:"https://api.themoviedb.org/3/"});C.interceptors.request.use((function(e){return Object(D.a)({},e,{params:Object(D.a)({},e.params,{api_key:"f050d4ef094a2dfdea7f0baa5264081f"})})}),(function(e){return Promise.reject(e)}));var R,k,x,G,M,B,U,T=n(6),V=function(e,t,n){var r=t;return"ByGenres"===e?(null===n||void 0===n?void 0:n.length)>0&&(r=t.filter((function(e){return null===n||void 0===n?void 0:n.every((function(t){return e.genre_ids.includes(t)}))}))):"ByUserScore"===e&&(r=r.filter((function(e){return e.vote_average>=n}))),r},F=(R=S.f.bound,k=S.f.bound,x=S.f.bound,G=S.f.bound,M=S.f.bound,B=S.f.bound,U=function(){function e(){Object(w.a)(this,e),this.nowPlaying=null,this.genres=null,this.result=null,this.movieSortOrder="Popularity Descending",this.movieChosenGenres=null,this.userScore=3}return Object(E.a)(e,[{key:"initFetchAsync",value:function(){var e=this,t=N.map((function(e){return C.get(e)}));Promise.all(t).then((function(e){return console.log(e),e.map((function(e){return e.data}))})).then((function(t){e.saveNowPlaying(t[0]),e.saveGenres(t[1])})).then((function(){return e.setResultValues()})).catch((function(e){console.error(e)}))}},{key:"loadMoreMoviesAsync",value:function(){var e=this;C.get(N[0],{params:{page:this.nextPage}}).then((function(t){e.saveNowPlaying(t.data)})).then((function(){e.setResultValues()})).catch((function(e){console.error(e)}))}},{key:"saveNowPlaying",value:function(e){this.nowPlaying?(console.log(this.nowPlaying.results),this.nowPlaying={results:[].concat(Object(j.a)(this.nowPlaying.results),Object(j.a)(e.results)),page:e.page,total_pages:e.total_pages,dates:e.dates,total_results:e.total_results}):this.nowPlaying=e}},{key:"saveGenres",value:function(e){this.genres=e.genres}},{key:"changeSortOrder",value:function(e){this.movieSortOrder=e,this.setResultValues()}},{key:"changeChosenGenres",value:function(e){this.movieChosenGenres=e,this.setResultValues()}},{key:"changeUserScore",value:function(e){this.userScore=e,this.setResultValues()}},{key:"setResultValues",value:function(){var e=function(e,t){if("Popularity Descending"===t)return Object(T.orderBy)(e,(function(e){return e.popularity}),"desc");if("Popularity Ascending"===t)return Object(T.orderBy)(e,(function(e){return e.popularity}),"asc");if("Rating Descending"===t)return Object(T.orderBy)(e,(function(e){return e.vote_average}),"desc");if("Rating Ascending"===t)return Object(T.orderBy)(e,(function(e){return e.vote_average}),"asc");if("Release Date Descending"===t)return Object(T.orderBy)(e,(function(e){return e.release_date}),"desc");if("Release Date Ascending"===t)return Object(T.orderBy)(e,(function(e){return e.release_date}),"asc");if("Title (A-Z)"===t)return Object(T.orderBy)(e,(function(e){return e.title}),"asc");if("Title (Z-A)"===t)return Object(T.orderBy)(e,(function(e){return e.title}),"desc");throw new Error("Unknown sort order")}(this.nowPlaying.results.map((function(e){return Object(T.pick)(e,["title","poster_path","genre_ids","popularity","vote_average","release_date"])})),this.movieSortOrder);e=V("ByGenres",e,this.movieChosenGenres),e=V("ByUserScore",e,this.userScore),this.result=e}},{key:"nextPage",get:function(){var e;return(null===(e=this.nowPlaying)||void 0===e?void 0:e.page)?this.nowPlaying.page+1:1}}]),e}(),Object(P.a)(U.prototype,"initFetchAsync",[S.f],Object.getOwnPropertyDescriptor(U.prototype,"initFetchAsync"),U.prototype),Object(P.a)(U.prototype,"nextPage",[S.g],Object.getOwnPropertyDescriptor(U.prototype,"nextPage"),U.prototype),Object(P.a)(U.prototype,"loadMoreMoviesAsync",[R],Object.getOwnPropertyDescriptor(U.prototype,"loadMoreMoviesAsync"),U.prototype),Object(P.a)(U.prototype,"saveNowPlaying",[k],Object.getOwnPropertyDescriptor(U.prototype,"saveNowPlaying"),U.prototype),Object(P.a)(U.prototype,"saveGenres",[x],Object.getOwnPropertyDescriptor(U.prototype,"saveGenres"),U.prototype),Object(P.a)(U.prototype,"changeSortOrder",[G],Object.getOwnPropertyDescriptor(U.prototype,"changeSortOrder"),U.prototype),Object(P.a)(U.prototype,"changeChosenGenres",[M],Object.getOwnPropertyDescriptor(U.prototype,"changeChosenGenres"),U.prototype),Object(P.a)(U.prototype,"changeUserScore",[B],Object.getOwnPropertyDescriptor(U.prototype,"changeUserScore"),U.prototype),U);Object(S.j)(F,{nowPlaying:S.o,genres:S.o,result:S.o,movieSortOrder:S.o,movieChosenGenres:S.o,userScore:S.o});var Z=a.a.createContext({movieStore:new F}),H=function(){return a.a.useContext(Z)},I=n(9),L=Object(I.a)((function(){var e=H().movieStore;return a.a.createElement(_,{options:[{value:"Popularity Descending",label:"Popularity Descending"},{value:"Popularity Ascending",label:"Popularity Ascending"},{value:"Rating Descending",label:"Rating Descending"},{value:"Rating Ascending",label:"Rating Ascending"},{value:"Release Date Descending",label:"Release Date Descending"},{value:"Release Date Ascending",label:"Release Date Ascending"},{value:"Title (A-Z)",label:"Title (A-Z)"},{value:"Title (Z-A)",label:"Title (Z-A)"}],value:{value:e.movieSortOrder,label:e.movieSortOrder},change:function(t){e.changeSortOrder(t.value)}})})),q=Object(I.a)((function(){var e,t,n=H().movieStore,r=null===(e=n.genres)||void 0===e?void 0:e.map((function(e){return{value:e.id,label:e.name}})),o=null===(t=n.genres)||void 0===t?void 0:t.reduce((function(e,t){var r;return(null===(r=n.movieChosenGenres)||void 0===r?void 0:r.some((function(e){return e===t.id})))?[].concat(Object(j.a)(e),[{value:t.id,label:t.name}]):e}),[]);return a.a.createElement(_,{options:r,value:o,change:function(e){var t=null===e||void 0===e?void 0:e.map((function(e){return e.value}));n.changeChosenGenres(t)},isMulti:!0,placeholder:"Select genre..."})})),J=n(94),K=n(96),Y=n(97),z=Object(J.a)({root:{width:"100%"},p:{fontFamily:"Comic Neue, cursive"},slider:{color:"#01b4e4"}});function Q(e){return"".concat(e,"\xb0C")}var W=function(e){var t=z();return a.a.createElement("div",{className:t.root},a.a.createElement(K.a,{id:"discrete-slider",gutterBottom:!0,className:t.p},e.label),a.a.createElement(Y.a,{className:t.slider,defaultValue:e.value,getAriaValueText:Q,"aria-labelledby":"discrete-slider",valueLabelDisplay:"auto",step:.5,marks:!0,min:0,max:10,onChange:function(t,n){e.change(n)}}))},X=function(e){var t=H().movieStore,n=t.changeUserScore;return a.a.createElement(W,{label:"User Score",value:t.userScore,change:n})},$=function(){return a.a.createElement("aside",{className:b.a.sidebar},a.a.createElement(L,null),a.a.createElement(q,null),a.a.createElement(X,null))},ee=n(21),te=n.n(ee),ne=Object(I.a)((function(e){var t,n=e.movie;return a.a.createElement("div",{className:te.a.wrapper},a.a.createElement("div",{className:te.a.card},a.a.createElement("img",{src:"https://image.tmdb.org/t/p/w500/".concat(n.poster_path),alt:n.title}),a.a.createElement("div",{className:te.a.description},a.a.createElement("span",{className:te.a.title},n.title),a.a.createElement("span",null,null===(t=e.genresText)||void 0===t?void 0:t.join(", ")))))})),re=n(49),ae=n.n(re),oe=n(50),ie=n.n(oe),ce=function(e){return a.a.createElement("button",{className:"btn__full",onClick:function(){e.click()}},e.children)},le=Object(I.a)((function(){var e,t=H().movieStore;return a.a.createElement("div",{className:ie.a.cards},null===(e=t.result)||void 0===e?void 0:e.map((function(e){var n=function(e,t){return null===e||void 0===e?void 0:e.reduce((function(e,n){return t.some((function(e){return e===n.id}))?[].concat(Object(j.a)(e),[n.name]):e}),[])}(t.genres,e.genre_ids);return a.a.createElement(ne,{key:ae()(),movie:e,genresText:n})})),a.a.createElement(ce,{click:t.loadMoreMoviesAsync},"Load more"))})),se=function(){return a.a.createElement("div",{className:"title"},a.a.createElement("h1",{className:"title__text"},"Now Playing Movies"))},ue=function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(d,null,"Header"),a.a.createElement("div",{className:"container"},a.a.createElement(se,null),a.a.createElement("div",{className:"content"},a.a.createElement($,null),a.a.createElement(g,null,a.a.createElement(le,null)))),a.a.createElement(y,null,"Footer"))},de=Object(I.a)((function(){var e=H().movieStore;return Object(r.useEffect)((function(){e.genres&&e.nowPlaying||e.initFetchAsync()})),a.a.createElement(ue,null)}));n(79);i.a.render(a.a.createElement(de,null),document.getElementById("root"))}},[[53,1,2]]]);
//# sourceMappingURL=main.41ce595a.chunk.js.map